<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë°ì´ì§€ - ì „êµ­ í•œì¤‘ ì—°ë™ ì‹œìŠ¤í…œ</title>

<!-- Pretendard (ì„ íƒ) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
  :root{
    --message-left: 860px;
    --message-top: 850px;
    --region-offset-y: 0px;
    --point-color: #FFD700;
  }

  body{
    margin:0;
    background:#1a1a1a;
    display:flex;
    justify-content:flex-start;
    align-items:center;
    height:100vh;
    font-family:'Pretendard', system-ui, sans-serif;
    overflow:hidden;
  }

  #content{
    width:1536px;
    height:1024px;
    background:url('bok.png') center/cover no-repeat;
    position:relative;
    color:var(--point-color);
    text-shadow:0 0 10px #000;
    flex-shrink:0;
  }

  #time{
    position:absolute;
    top:20px;
    right:20px;
    font-size:80px;
    font-weight:900;
  }

  #message{
    position:absolute;
    left:var(--message-left);
    top:var(--message-top);
    display:flex;
    flex-direction:column;
    gap:4px;
  }

  .line{
    font-size:32px;
    font-weight:700;
    white-space:nowrap;
  }

  #region{
    font-size:36px;
    font-weight:900;
    color:#fff;
    position:relative;
    top:var(--region-offset-y);
  }

  /* ì˜¤ë¥¸ìª½ íŒ¨ë„ */
  #control-panel{
    width:420px;
    height:100vh;
    background:#252525;
    padding:26px 18px;
    box-sizing:border-box;
    border-left:2px solid var(--point-color);
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  h3{ color:var(--point-color); margin:0; font-size:20px; }
  .label{ color:#aaa; font-size:13px; margin-top:6px; }

  select, button, input[type="range"]{
    width:100%;
    padding:12px;
    font-size:15px;
    background:#111;
    color:var(--point-color);
    border:1px solid #444;
    border-radius:8px;
    outline:none;
    box-sizing:border-box;
  }

  button{
    cursor:pointer;
    font-weight:900;
    background:linear-gradient(135deg, rgba(255,215,0,.35), rgba(255,215,0,.12));
    border:1px solid rgba(255,215,0,.55);
  }
  button:hover{ filter:brightness(1.08); }

  .rangeWrap{
    background:#111;
    border:1px solid #444;
    border-radius:8px;
    padding:10px 12px;
  }
  .rangeTop{
    display:flex;
    justify-content:space-between;
    align-items:center;
    color:#ddd;
    font-size:13px;
    margin-bottom:6px;
  }
  .rangeTop b{ color:var(--point-color); font-weight:900; }

  #status{
    margin-top:auto;
    padding:14px;
    border-radius:10px;
    text-align:center;
    font-weight:900;
    opacity:0;
    transition:opacity 0.25s;
  }
  .success{ background:#2e7d32; color:#fff; opacity:1 !important; }
  .fail{ background:#b00020; color:#fff; opacity:1 !important; }
</style>
</head>

<body>

<div id="content">
  <div id="time"></div>
  <div id="message">
    <div class="line">ê°€ê¹Œìš´ ê³³ì—ì„œ, ëŒë¦¼ì´ í”¼ëŠ” ì¤‘</div>
    <div id="region">ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”</div>
    <div class="line">ê·¼ì²˜ì˜ ëˆ„êµ°ê°€ë¥¼ ì°¾ê³  ìˆì–´ìš”..</div>
  </div>
</div>

<div id="control-panel">
  <h3>ğŸŒ¼ ë°ì´ì§€ ì§€ì—­ ì—°ë™</h3>

  <div class="label">í•œêµ­ì–´ ì„ íƒ (Korean)</div>
  <select id="sido-ko"></select>
  <select id="sigungu-ko"></select>

  <div style="height:1px;background:#444;margin:6px 0;"></div>

  <div class="label">ì¤‘êµ­ì–´ ì„ íƒ (Chinese)</div>
  <select id="sido-cn"></select>
  <select id="sigungu-cn"></select>

  <div style="height:1px;background:#444;margin:10px 0;"></div>

  <div class="label">ë¬¸êµ¬ ìœ„ì¹˜ ì¡°ì ˆ</div>

  <div class="rangeWrap">
    <div class="rangeTop">Left(ê°€ë¡œ): <b id="vLeft">860</b>px</div>
    <input id="rLeft" type="range" min="0" max="1200" value="860">
  </div>

  <div class="rangeWrap">
    <div class="rangeTop">Top(ì„¸ë¡œ): <b id="vTop">850</b>px</div>
    <input id="rTop" type="range" min="0" max="950" value="850">
  </div>

  <div class="rangeWrap">
    <div class="rangeTop">ì§€ì—­Y(ë¯¸ì„¸): <b id="vRy">0</b>px</div>
    <input id="rRy" type="range" min="-60" max="60" value="0">
  </div>

  <button type="button" id="btnCopy">ğŸ“¸ ì§€ê¸ˆ í™”ë©´ ì´ë¯¸ì§€ ë³µì‚¬</button>

  <div id="status">âœ… ì´ë¯¸ì§€ ë³µì‚¬ ì™„ë£Œ!</div>
</div>

<script>
/* âœ… ì „êµ­ 17ê°œ ì‹œë„ + ì¤‘êµ­ì–´ ë§¤í•‘ */
const regionData = {
  "ì„œìš¸íŠ¹ë³„ì‹œ": { cn:"é¦–å°”", sigungu: { "ê°•ë‚¨êµ¬":"æ±Ÿå—åŒº","ê°•ë™êµ¬":"æ±Ÿä¸œåŒº","ê°•ë¶êµ¬":"æ±ŸåŒ—åŒº","ê°•ì„œêµ¬":"æ±Ÿè¥¿åŒº","ê´€ì•…êµ¬":"å† å²³åŒº","ê´‘ì§„êµ¬":"å¹¿æ´¥åŒº","êµ¬ë¡œêµ¬":"ä¹è€åŒº","ê¸ˆì²œêµ¬":"è¡¿å·åŒº","ë…¸ì›êµ¬":"èŠ¦åŸåŒº","ë„ë´‰êµ¬":"é“å³°åŒº","ë™ëŒ€ë¬¸êµ¬":"ä¸œå¤§é—¨åŒº","ë™ì‘êµ¬":"é“œé›€åŒº","ë§ˆí¬êµ¬":"éº»æµ¦åŒº","ì„œëŒ€ë¬¸êµ¬":"è¥¿å¤§é—¨åŒº","ì„œì´ˆêµ¬":"ç‘è‰åŒº","ì„±ë™êµ¬":"åŸä¸œåŒº","ì„±ë¶êµ¬":"åŸåŒ—åŒº","ì†¡íŒŒêµ¬":"æ¾å¡åŒº","ì–‘ì²œêµ¬":"é˜³å·åŒº","ì˜ë“±í¬êµ¬":"æ°¸ç™»æµ¦åŒº","ìš©ì‚°êµ¬":"é¾™å±±åŒº","ì€í‰êµ¬":"æ©å¹³åŒº","ì¢…ë¡œêµ¬":"é’Ÿè·¯åŒº","ì¤‘êµ¬":"ä¸­åŒº","ì¤‘ë‘êµ¬":"ä¸­æµªåŒº" } },
  "ë¶€ì‚°ê´‘ì—­ì‹œ": { cn:"é‡œå±±", sigungu:{ "ê°•ì„œêµ¬":"æ±Ÿè¥¿åŒº","ê¸ˆì •êµ¬":"é‡‘äº•åŒº","ê¸°ì¥êµ°":"æœºå¼ éƒ¡","ë‚¨êµ¬":"å—åŒº","ë™êµ¬":"ä¸œåŒº","ë™ë˜êµ¬":"ä¸œè±åŒº","ë¶€ì‚°ì§„êµ¬":"é‡œå±±é•‡åŒº","ë¶êµ¬":"åŒ—åŒº","ì‚¬ìƒêµ¬":"æ²™ä¸ŠåŒº","ì‚¬í•˜êµ¬":"æ²™ä¸‹åŒº","ì„œêµ¬":"è¥¿åŒº","ìˆ˜ì˜êµ¬":"æ°´è¥åŒº","ì—°ì œêµ¬":"è²å ¤åŒº","ì˜ë„êµ¬":"å½±å²›åŒº","ì¤‘êµ¬":"ä¸­åŒº","í•´ìš´ëŒ€êµ¬":"æµ·äº‘å°åŒº" } },
  "ëŒ€êµ¬ê´‘ì—­ì‹œ": { cn:"å¤§é‚±", sigungu:{ "ë‚¨êµ¬":"å—åŒº","ë‹¬ì„œêµ¬":"è¾¾è¥¿åŒº","ë‹¬ì„±êµ°":"è¾¾åŸéƒ¡","ë™êµ¬":"ä¸œåŒº","ë¶êµ¬":"åŒ—åŒº","ì„œêµ¬":"è¥¿åŒº","ìˆ˜ì„±êµ¬":"å¯¿åŸåŒº","ì¤‘êµ¬":"ä¸­åŒº","êµ°ìœ„êµ°":"å†›å¨éƒ¡" } },
  "ì¸ì²œê´‘ì—­ì‹œ": { cn:"ä»å·", sigungu:{ "ê°•í™”êµ°":"æ±Ÿåéƒ¡","ê³„ì–‘êµ¬":"æ¡‚é˜³åŒº","ë‚¨ë™êµ¬":"å—æ´åŒº","ë™êµ¬":"ä¸œåŒº","ë¯¸ì¶”í™€êµ¬":"å¼¥é‚¹å¿½åŒº","ë¶€í‰êµ¬":"å¯Œå¹³åŒº","ì„œêµ¬":"è¥¿åŒº","ì—°ìˆ˜êµ¬":"å»¶å¯¿åŒº","ì˜¹ì§„êµ°":"ç“®æ´¥éƒ¡","ì¤‘êµ¬":"ä¸­åŒº" } },
  "ê´‘ì£¼ê´‘ì—­ì‹œ": { cn:"å…‰å·", sigungu:{ "ê´‘ì‚°êµ¬":"å…‰å±±åŒº","ë‚¨êµ¬":"å—åŒº","ë™êµ¬":"ä¸œåŒº","ë¶êµ¬":"åŒ—åŒº","ì„œêµ¬":"è¥¿åŒº" } },
  "ëŒ€ì „ê´‘ì—­ì‹œ": { cn:"å¤§ç”°", sigungu:{ "ëŒ€ë•êµ¬":"å¤§å¾·åŒº","ë™êµ¬":"ä¸œåŒº","ì„œêµ¬":"è¥¿åŒº","ìœ ì„±êµ¬":"å„’åŸåŒº","ì¤‘êµ¬":"ä¸­åŒº" } },
  "ìš¸ì‚°ê´‘ì—­ì‹œ": { cn:"è”šå±±", sigungu:{ "ë‚¨êµ¬":"å—åŒº","ë™êµ¬":"ä¸œåŒº","ë¶êµ¬":"åŒ—åŒº","ìš¸ì£¼êµ°":"è”šå·éƒ¡","ì¤‘êµ¬":"ä¸­åŒº" } },
  "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ": { cn:"ä¸–å®—", sigungu:{ "ì„¸ì¢…ì‹œ":"ä¸–å®—å¸‚" } },

  "ê²½ê¸°ë„": { cn:"äº¬ç•¿é“", sigungu:{
    "ìˆ˜ì›ì‹œ":"æ°´åŸå¸‚","ì„±ë‚¨ì‹œ":"åŸå—å¸‚","ì˜ì •ë¶€ì‹œ":"è®®æ”¿åºœå¸‚","ì•ˆì–‘ì‹œ":"å®‰å…»å¸‚","ë¶€ì²œì‹œ":"å¯Œå·å¸‚",
    "ê´‘ëª…ì‹œ":"å…‰æ˜å¸‚","í‰íƒì‹œ":"å¹³æ³½å¸‚","ë™ë‘ì²œì‹œ":"ä¸œè±†å·å¸‚",
    "ì•ˆì‚°ì‹œ":"å®‰å±±å¸‚","ê³ ì–‘ì‹œ":"é«˜é˜³å¸‚","ê³¼ì²œì‹œ":"æœå·å¸‚","êµ¬ë¦¬ì‹œ":"ä¹é‡Œå¸‚","ë‚¨ì–‘ì£¼ì‹œ":"å—æ¨å·å¸‚",
    "ì˜¤ì‚°ì‹œ":"ä¹Œå±±å¸‚","ì‹œí¥ì‹œ":"å§‹å…´å¸‚","êµ°í¬ì‹œ":"å†›æµ¦å¸‚","ì˜ì™•ì‹œ":"ä¹‰ç‹å¸‚","í•˜ë‚¨ì‹œ":"æ²³å—å¸‚",
    "ìš©ì¸ì‹œ":"é¾™ä»å¸‚","íŒŒì£¼ì‹œ":"å¡å·å¸‚","ì´ì²œì‹œ":"åˆ©å·å¸‚","ì•ˆì„±ì‹œ":"å®‰åŸå¸‚","ê¹€í¬ì‹œ":"é‡‘æµ¦å¸‚",
    "í™”ì„±ì‹œ":"ååŸå¸‚","ê´‘ì£¼ì‹œ":"å¹¿å·å¸‚","ì–‘ì£¼ì‹œ":"æ¨å·å¸‚","í¬ì²œì‹œ":"æŠ±å·å¸‚","ì—¬ì£¼ì‹œ":"éªŠå·å¸‚",
    "ì—°ì²œêµ°":"æ¶Ÿå·éƒ¡","ê°€í‰êµ°":"åŠ å¹³éƒ¡","ì–‘í‰êµ°":"æ¨å¹³éƒ¡"
  }},

  "ê°•ì›íŠ¹ë³„ìì¹˜ë„": { cn:"æ±ŸåŸé“", sigungu:{ "ì¶˜ì²œì‹œ":"æ˜¥å·å¸‚","ê°•ë¦‰ì‹œ":"æ±Ÿé™µå¸‚","ì›ì£¼ì‹œ":"åŸå·å¸‚","ë™í•´ì‹œ":"ä¸œæµ·å¸‚","íƒœë°±ì‹œ":"å¤ªç™½å¸‚","ì†ì´ˆì‹œ":"æŸè‰å¸‚","ì‚¼ì²™ì‹œ":"ä¸‰é™Ÿå¸‚","í™ì²œêµ°":"æ´ªå·éƒ¡","íš¡ì„±êµ°":"æ¨ªåŸéƒ¡","ì˜ì›”êµ°":"å®è¶Šéƒ¡","í‰ì°½êµ°":"å¹³æ˜Œéƒ¡","ì •ì„ êµ°":"æ—Œå–„éƒ¡","ì² ì›êµ°":"é“åŸéƒ¡","í™”ì²œêµ°":"åå·éƒ¡","ì–‘êµ¬êµ°":"æ¨å£éƒ¡","ì¸ì œêµ°":"éºŸè¹„éƒ¡","ê³ ì„±êµ°":"é«˜åŸéƒ¡","ì–‘ì–‘êµ°":"è¥„é˜³éƒ¡" } },
  "ì¶©ì²­ë¶ë„": { cn:"å¿ æ¸…åŒ—é“", sigungu:{ "ì²­ì£¼ì‹œ":"æ¸…å·å¸‚","ì¶©ì£¼ì‹œ":"å¿ å·å¸‚","ì œì²œì‹œ":"å ¤å·å¸‚","ë³´ì€êµ°":"æŠ¥æ©éƒ¡","ì˜¥ì²œêµ°":"æ²ƒå·éƒ¡","ì˜ë™êµ°":"æ°¸åŒéƒ¡","ì¦í‰êµ°":"æ›¾åªéƒ¡","ì§„ì²œêµ°":"é•‡å·éƒ¡","ê´´ì‚°êµ°":"æ§å±±éƒ¡","ìŒì„±êµ°":"é˜´åŸéƒ¡","ë‹¨ì–‘êµ°":"ä¸¹é˜³éƒ¡" } },
  "ì¶©ì²­ë‚¨ë„": { cn:"å¿ æ¸…å—é“", sigungu:{ "ì²œì•ˆì‹œ":"å¤©å®‰å¸‚","ê³µì£¼ì‹œ":"å…¬å·å¸‚","ë³´ë ¹ì‹œ":"ä¿å®å¸‚","ì•„ì‚°ì‹œ":"ç‰™å±±å¸‚","ì„œì‚°ì‹œ":"ç‘å±±å¸‚","ë…¼ì‚°ì‹œ":"è®ºå±±å¸‚","ê³„ë£¡ì‹œ":"é¸¡é¾™å¸‚","ë‹¹ì§„ì‹œ":"å”æ´¥å¸‚","ê¸ˆì‚°êµ°":"é”¦å±±éƒ¡","ë¶€ì—¬êµ°":"æ‰¶ä½™éƒ¡","ì„œì²œêµ°":"èˆ’å·éƒ¡","ì²­ì–‘êµ°":"é’é˜³éƒ¡","í™ì„±êµ°":"æ´ªåŸéƒ¡","ì˜ˆì‚°êµ°":"ç¤¼å±±éƒ¡","íƒœì•ˆêµ°":"æ³°å®‰éƒ¡" } },
  "ì „ë¼ë¶ë„": { cn:"å…¨ç½—åŒ—é“", sigungu:{ "ì „ì£¼ì‹œ":"å…¨å·å¸‚","êµ°ì‚°ì‹œ":"ç¾¤å±±å¸‚","ìµì‚°ì‹œ":"ç›Šå±±å¸‚","ì •ìì‹œ":"äº•é‚‘å¸‚","ë‚¨ì›ì‹œ":"å—åŸå¸‚","ê¹€ì œì‹œ":"é‡‘å ¤å¸‚","ì™„ì£¼êµ°":"å®Œå·éƒ¡","ì§„ì•ˆêµ°":"é•‡å®‰éƒ¡","ë¬´ì£¼êµ°":"èŒ‚æœ±éƒ¡","ì¥ìˆ˜êµ°":"é•¿æ°´éƒ¡","ì„ì‹¤êµ°":"ä»»å®éƒ¡","ìˆœì°½êµ°":"æ·³æ˜Œéƒ¡","ê³ ì°½êµ°":"é«˜æ•éƒ¡","ë¶€ì•ˆêµ°":"æ‰¶å®‰éƒ¡" } },
  "ì „ë¼ë‚¨ë„": { cn:"å…¨ç½—å—é“", sigungu:{ "ëª©í¬ì‹œ":"æœ¨æµ¦å¸‚","ì—¬ìˆ˜ì‹œ":"ä¸½æ°´å¸‚","ìˆœì²œì‹œ":"é¡ºå¤©å¸‚","ë‚˜ì£¼ì‹œ":"ç½—å·å¸‚","ê´‘ì–‘ì‹œ":"å…‰é˜³å¸‚","ë‹´ì–‘êµ°":"æ½­é˜³éƒ¡","ê³¡ì„±êµ°":"è°·åŸéƒ¡","êµ¬ë¡€êµ°":"æ±‚ç¤¼éƒ¡","ë³´ì„±êµ°":"å®åŸéƒ¡","í™”ìˆœêµ°":"å’Œé¡ºéƒ¡","ì¥í¥êµ°":"é•¿å…´éƒ¡","ê°•ì§„êµ°":"åº·æ´¥éƒ¡","í•´ë‚¨êµ°":"æµ·å—éƒ¡","ì˜ì•”êµ°":"çµå²©éƒ¡","ë¬´ì•ˆêµ°":"åŠ¡å®‰éƒ¡","í•¨í‰êµ°":"å’¸å¹³éƒ¡","ì˜ê´‘êµ°":"çµå…‰éƒ¡","ì¥ì„±êµ°":"é•¿åŸéƒ¡","ì™„ë„êµ°":"èå²›éƒ¡","ì§„ë„êµ°":"çå²›éƒ¡","ì‹ ì•ˆêµ°":"æ–°å®‰éƒ¡" } },
  "ê²½ìƒë¶ë„": { cn:"åº†å°šåŒ—é“", sigungu:{ "í¬í•­ì‹œ":"æµ¦é¡¹å¸‚","ê²½ì£¼ì‹œ":"åº†å·å¸‚","ê¹€ì²œì‹œ":"é‡‘æ³‰å¸‚","ì•ˆë™ì‹œ":"å®‰ä¸œå¸‚","êµ¬ë¯¸ì‹œ":"é¾Ÿå°¾å¸‚","ì˜ì£¼ì‹œ":"è£å·å¸‚","ì˜ì²œì‹œ":"æ°¸å·å¸‚","ìƒì£¼ì‹œ":"å°šå·å¸‚","ë¬¸ê²½ì‹œ":"é—»åº†å¸‚","ê²½ì‚°ì‹œ":"åº†å±±å¸‚","ì˜ì„±êµ°":"ä¹‰åŸéƒ¡","ì²­ì†¡êµ°":"é’æ¾éƒ¡","ì˜ì–‘êµ°":"è‹±é˜³éƒ¡","ì˜ë•êµ°":"ç›ˆå¾·éƒ¡","ì²­ë„êµ°":"æ¸…é“éƒ¡","ê³ ë ¹êµ°":"é«˜çµéƒ¡","ì„±ì£¼êµ°":"æ˜Ÿå·éƒ¡","ì¹ ê³¡êµ°":"æ¼†è°·éƒ¡","ì˜ˆì²œêµ°":"é†´æ³‰éƒ¡","ë´‰í™”êµ°":"å¥‰åŒ–éƒ¡","ìš¸ì§„êµ°":"è”šçéƒ¡","ìš¸ë¦‰êµ°":"éƒé™µéƒ¡" } },
  "ê²½ìƒë‚¨ë„": { cn:"åº†å°šå—é“", sigungu:{ "ì°½ì›ì‹œ":"æ˜ŒåŸå¸‚","ì§„ì£¼ì‹œ":"æ™‹å·å¸‚","í†µì˜ì‹œ":"ç»Ÿç›ˆå¸‚","ì‚¬ì²œì‹œ":"æ³—å·å¸‚","ê¹€í•´ì‹œ":"é‡‘æµ·å¸‚","ë°€ì–‘ì‹œ":"å¯†é˜³å¸‚","ê±°ì œì‹œ":"å·¨æµå¸‚","ì–‘ì‚°ì‹œ":"æ¢å±±å¸‚","ì˜ë ¹êµ°":"å®œå®éƒ¡","í•¨ì•ˆêµ°":"å’¸å®‰éƒ¡","ì°½ë…•êµ°":"æ˜Œå®éƒ¡","ê³ ì„±êµ°":"å›ºåŸéƒ¡","ë‚¨í•´êµ°":"å—æµ·éƒ¡","í•˜ë™êµ°":"æ²³ä¸œéƒ¡","ì‚°ì²­êµ°":"å±±æ¸…éƒ¡","í•¨ì–‘êµ°":"å’¸é˜³éƒ¡","ê±°ì°½êµ°":"å±…æ˜Œéƒ¡","í•©ì²œêµ°":"é™•å·éƒ¡" } },
  "ì œì£¼íŠ¹ë³„ìì¹˜ë„": { cn:"æµå·é“", sigungu:{ "ì œì£¼ì‹œ":"æµå·å¸‚","ì„œê·€í¬ì‹œ":"è¥¿å½’æµ¦å¸‚" } }
};

const sidoKo = document.getElementById('sido-ko');
const sigunguKo = document.getElementById('sigungu-ko');
const sidoCn = document.getElementById('sido-cn');
const sigunguCn = document.getElementById('sigungu-cn');
const regionDisplay = document.getElementById('region');
const statusMsg = document.getElementById('status');

/* ìŠ¬ë¼ì´ë” */
const rLeft = document.getElementById('rLeft');
const rTop  = document.getElementById('rTop');
const rRy   = document.getElementById('rRy');
const vLeft = document.getElementById('vLeft');
const vTop  = document.getElementById('vTop');
const vRy   = document.getElementById('vRy');

function setCSSVar(name, val){
  document.documentElement.style.setProperty(name, val);
}

function init(){
  sidoKo.innerHTML = `<option value="">ê´‘ì—­ ì„ íƒ</option>`;
  sidoCn.innerHTML = `<option value="">é€‰æ‹© åœ°åŒº</option>`;
  Object.keys(regionData).forEach(ko=>{
    sidoKo.innerHTML += `<option value="${ko}">${ko}</option>`;
    sidoCn.innerHTML += `<option value="${ko}">${regionData[ko].cn}</option>`;
  });

  sigunguKo.innerHTML = `<option value="">ì‹œêµ°êµ¬ ì„ íƒ</option>`;
  sigunguCn.innerHTML = `<option value="">é€‰æ‹© å¸‚éƒ¡åŒº</option>`;
}

function resetSigungu(){
  sigunguKo.innerHTML = `<option value="">ì‹œêµ°êµ¬ ì„ íƒ</option>`;
  sigunguCn.innerHTML = `<option value="">é€‰æ‹© å¸‚éƒ¡åŒº</option>`;
  sigunguKo.value = "";
  sigunguCn.value = "";
}

function updateSigunguList(val){
  resetSigungu();
  if(val && regionData[val]){
    const list = regionData[val].sigungu;
    Object.keys(list).forEach(ko=>{
      sigunguKo.innerHTML += `<option value="${ko}">${ko}</option>`;
      sigunguCn.innerHTML += `<option value="${ko}">${list[ko]}</option>`;
    });
  }
}

/* ë™ê¸°í™” */
sidoKo.onchange = (e)=>{
  const val = e.target.value;
  sidoCn.value = val;
  updateSigunguList(val);

  regionDisplay.textContent = val ? val : "ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”";
};

sidoCn.onchange = (e)=>{
  const val = e.target.value;
  sidoKo.value = val;
  updateSigunguList(val);

  regionDisplay.textContent = val ? val : "ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”";
};

sigunguKo.onchange = async(e)=>{
  const val = e.target.value;
  sigunguCn.value = val;

  if(val){
    regionDisplay.textContent = `${sidoKo.value} ${val}`;
    await copyToClipboard();
  }
};

sigunguCn.onchange = async(e)=>{
  const val = e.target.value;
  sigunguKo.value = val;

  // âœ… í˜¹ì‹œ sidoê°€ ë¹„ì–´ìˆìœ¼ë©´(ì¤‘êµ­ì–´ ë¨¼ì € ì¡°ì‘) ê°•ì œ ì„¸íŒ…
  if(!sidoKo.value && sidoCn.value){
    sidoKo.value = sidoCn.value;
  }

  if(val){
    regionDisplay.textContent = `${sidoKo.value} ${val}`;
    await copyToClipboard();
  }
};

/* ì‹œê°„ */
setInterval(()=>{
  const d = new Date();
  document.getElementById('time').textContent =
    `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}:${String(d.getSeconds()).padStart(2,'0')}`;
}, 1000);

/* ìƒíƒœ */
function showStatus(ok, text){
  statusMsg.textContent = text;
  statusMsg.classList.remove('success','fail');
  statusMsg.classList.add(ok ? 'success' : 'fail');
  setTimeout(()=>statusMsg.classList.remove('success','fail'), 2000);
}

/* âœ… ìº¡ì²˜ & í´ë¦½ë³´ë“œ ë³µì‚¬ */
async function copyToClipboard(){
  const content = document.getElementById('content');

  try{
    const scale = 2; // âœ… ì„ ëª…ë„
    const canvas = await html2canvas(content, {
      scale,
      useCORS: true,
      allowTaint: false,
      backgroundColor: null
    });

    canvas.toBlob(async(blob)=>{
      if(!blob){
        showStatus(false, "âŒ ìº¡ì²˜ ì‹¤íŒ¨(toBlob null)");
        return;
      }

      // ClipboardItem ì§€ì› ì²´í¬
      if(typeof ClipboardItem === "undefined"){
        showStatus(false, "âŒ ì´ ë¸Œë¼ìš°ì €ëŠ” ì´ë¯¸ì§€ ë³µì‚¬ë¥¼ ì§€ì› ì•ˆí•¨");
        return;
      }

      try{
        const item = new ClipboardItem({ "image/png": blob });
        await navigator.clipboard.write([item]);
        showStatus(true, "âœ… ì´ë¯¸ì§€ ë³µì‚¬ ì™„ë£Œ!");
      }catch(e){
        showStatus(false, "âŒ ë³µì‚¬ ì‹¤íŒ¨(ê¶Œí•œ/HTTPS í•„ìš”) â€” ë²„íŠ¼ìœ¼ë¡œ ë‹¤ì‹œ!");
      }
    }, "image/png");
  }catch(err){
    console.error(err);
    showStatus(false, "âŒ ìº¡ì²˜ ì‹¤íŒ¨(html2canvas ì—ëŸ¬)");
  }
}

/* ë²„íŠ¼ */
document.getElementById('btnCopy').onclick = copyToClipboard;

/* ìŠ¬ë¼ì´ë” ì—°ê²° */
function bindRange(rangeEl, labelEl, cssVar, suffix="px"){
  const apply = ()=>{
    labelEl.textContent = rangeEl.value;
    setCSSVar(cssVar, rangeEl.value + suffix);
  };
  rangeEl.addEventListener('input', apply);
  apply();
}
bindRange(rLeft, vLeft, '--message-left');
bindRange(rTop,  vTop,  '--message-top');
bindRange(rRy,   vRy,   '--region-offset-y');

init();
</script>
</body>
</html>
